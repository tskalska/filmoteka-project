{"id":"A7jH","dependencies":[{"name":"/Users/tskalska/goit/filmoteka-project/package.json","includedInParent":true,"mtime":1642461697429},{"name":"/Users/tskalska/goit/filmoteka-project/.browserslistrc","includedInParent":true,"mtime":1642372169058},{"name":"../api/moviesdb-api","loc":{"line":1,"column":33},"parent":"/Users/tskalska/goit/filmoteka-project/src/js/components/search.js","resolved":"/Users/tskalska/goit/filmoteka-project/src/js/api/moviesdb-api.js"},{"name":"./rendering-movies","loc":{"line":2,"column":59},"parent":"/Users/tskalska/goit/filmoteka-project/src/js/components/search.js","resolved":"/Users/tskalska/goit/filmoteka-project/src/js/components/rendering-movies.js"},{"name":"notiflix","loc":{"line":3,"column":23},"parent":"/Users/tskalska/goit/filmoteka-project/src/js/components/search.js","resolved":"/Users/tskalska/goit/filmoteka-project/node_modules/notiflix/dist/notiflix-aio-3.0.1.min.js"},{"name":"./rendering-top-movies","loc":{"line":4,"column":32},"parent":"/Users/tskalska/goit/filmoteka-project/src/js/components/search.js","resolved":"/Users/tskalska/goit/filmoteka-project/src/js/components/rendering-top-movies.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.RenderSearchResults=o,exports.initSearch=void 0;var e=require(\"../api/moviesdb-api\"),r=require(\"./rendering-movies\"),t=require(\"notiflix\"),n=require(\"./rendering-top-movies\");const a={searchInputEl:null,searchFormEl:null,searchButtonEl:null},i=function(e){e.preventDefault();const r=a.searchInputEl.value;\"\"!==r.trim()?(pageState.query=r,pagination.reset(),o()):t.Notify.warning(\"Please enter movie name and try again\")};async function o(i=1){try{const u=await(0,e.getMoviesByQuery)(pageState.query,i),s=(0,r.makeMoviesArrayForRendering)(u);if(0===u.total_results)return t.Notify.warning(\"Search result not successful. Enter the correct movie name and try again\"),a.searchInputEl.value=\"\",pageState.query=\"\",void(0,n.renderTopMovies)();(0,r.renderGallery)(s),a.searchInputEl.value=\"\"}catch(o){t.Notify.failure(`${o}`)}}const u=function(){var e,r;a.searchInputEl=document.querySelector('input[name=\"query\"]'),a.searchFormEl=document.querySelector(\".header__search-form\"),a.searchButtonEl=document.querySelector(\".button-search\"),null===(e=a.searchButtonEl)||void 0===e||e.addEventListener(\"click\",i),null===(r=a.searchFormEl)||void 0===r||r.addEventListener(\"submit\",i)};exports.initSearch=u;"},"sourceMaps":{"js":{"mappings":[{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":0}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":13}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":20}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":35}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":43}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":56}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":57}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":64}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":68}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":76}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":96}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":98}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":106}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":122}},{"source":"js/components/search.js","original":{"line":1,"column":0},"generated":{"line":1,"column":124}},{"source":"js/components/search.js","original":{"line":1,"column":0},"generated":{"line":1,"column":128}},{"source":"js/components/search.js","original":{"line":1,"column":0},"generated":{"line":1,"column":130}},{"source":"js/components/search.js","original":{"line":1,"column":0},"generated":{"line":1,"column":138}},{"source":"js/components/search.js","original":{"line":2,"column":0},"generated":{"line":1,"column":161}},{"source":"js/components/search.js","original":{"line":2,"column":0},"generated":{"line":1,"column":163}},{"source":"js/components/search.js","original":{"line":2,"column":0},"generated":{"line":1,"column":171}},{"source":"js/components/search.js","original":{"line":3,"column":0},"generated":{"line":1,"column":193}},{"source":"js/components/search.js","original":{"line":3,"column":0},"generated":{"line":1,"column":195}},{"source":"js/components/search.js","original":{"line":3,"column":0},"generated":{"line":1,"column":203}},{"source":"js/components/search.js","original":{"line":4,"column":0},"generated":{"line":1,"column":215}},{"source":"js/components/search.js","original":{"line":4,"column":0},"generated":{"line":1,"column":217}},{"source":"js/components/search.js","original":{"line":4,"column":0},"generated":{"line":1,"column":225}},{"source":"js/components/search.js","original":{"line":6,"column":0},"generated":{"line":1,"column":251}},{"source":"js/components/search.js","name":"refs","original":{"line":6,"column":6},"generated":{"line":1,"column":257}},{"source":"js/components/search.js","original":{"line":6,"column":13},"generated":{"line":1,"column":259}},{"source":"js/components/search.js","name":"searchInputEl","original":{"line":7,"column":2},"generated":{"line":1,"column":260}},{"source":"js/components/search.js","original":{"line":7,"column":17},"generated":{"line":1,"column":274}},{"source":"js/components/search.js","name":"searchFormEl","original":{"line":8,"column":2},"generated":{"line":1,"column":279}},{"source":"js/components/search.js","original":{"line":8,"column":16},"generated":{"line":1,"column":292}},{"source":"js/components/search.js","name":"searchButtonEl","original":{"line":9,"column":2},"generated":{"line":1,"column":297}},{"source":"js/components/search.js","original":{"line":9,"column":18},"generated":{"line":1,"column":312}},{"source":"js/components/search.js","name":"onFormSubmit","original":{"line":12,"column":6},"generated":{"line":1,"column":318}},{"source":"js/components/search.js","original":{"line":12,"column":21},"generated":{"line":1,"column":320}},{"source":"js/components/search.js","name":"event","original":{"line":12,"column":31},"generated":{"line":1,"column":329}},{"source":"js/components/search.js","name":"event","original":{"line":13,"column":2},"generated":{"line":1,"column":332}},{"source":"js/components/search.js","name":"preventDefault","original":{"line":13,"column":8},"generated":{"line":1,"column":334}},{"source":"js/components/search.js","name":"query","original":{"line":14,"column":8},"generated":{"line":1,"column":351}},{"source":"js/components/search.js","name":"query","original":{"line":14,"column":8},"generated":{"line":1,"column":357}},{"source":"js/components/search.js","name":"refs","original":{"line":14,"column":16},"generated":{"line":1,"column":359}},{"source":"js/components/search.js","name":"searchInputEl","original":{"line":14,"column":21},"generated":{"line":1,"column":361}},{"source":"js/components/search.js","name":"value","original":{"line":14,"column":35},"generated":{"line":1,"column":375}},{"source":"js/components/search.js","original":{"line":16,"column":23},"generated":{"line":1,"column":381}},{"source":"js/components/search.js","name":"query","original":{"line":16,"column":6},"generated":{"line":1,"column":386}},{"source":"js/components/search.js","name":"trim","original":{"line":16,"column":12},"generated":{"line":1,"column":388}},{"source":"js/components/search.js","name":"pageState","original":{"line":21,"column":2},"generated":{"line":1,"column":396}},{"source":"js/components/search.js","name":"query","original":{"line":21,"column":12},"generated":{"line":1,"column":406}},{"source":"js/components/search.js","name":"query","original":{"line":21,"column":20},"generated":{"line":1,"column":412}},{"source":"js/components/search.js","name":"pagination","original":{"line":22,"column":2},"generated":{"line":1,"column":414}},{"source":"js/components/search.js","name":"reset","original":{"line":22,"column":13},"generated":{"line":1,"column":425}},{"source":"js/components/search.js","name":"RenderSearchResults","original":{"line":23,"column":2},"generated":{"line":1,"column":433}},{"source":"js/components/search.js","name":"warning","original":{"line":17,"column":11},"generated":{"line":1,"column":438}},{"source":"js/components/search.js","name":"warning","original":{"line":17,"column":11},"generated":{"line":1,"column":440}},{"source":"js/components/search.js","name":"warning","original":{"line":17,"column":11},"generated":{"line":1,"column":447}},{"source":"js/components/search.js","original":{"line":17,"column":19},"generated":{"line":1,"column":455}},{"source":"js/components/search.js","original":{"line":26,"column":7},"generated":{"line":1,"column":497}},{"source":"js/components/search.js","name":"RenderSearchResults","original":{"line":26,"column":22},"generated":{"line":1,"column":512}},{"source":"js/components/search.js","name":"page","original":{"line":26,"column":42},"generated":{"line":1,"column":514}},{"source":"js/components/search.js","original":{"line":26,"column":49},"generated":{"line":1,"column":516}},{"source":"js/components/search.js","original":{"line":27,"column":6},"generated":{"line":1,"column":519}},{"source":"js/components/search.js","name":"queryResult","original":{"line":28,"column":10},"generated":{"line":1,"column":523}},{"source":"js/components/search.js","name":"queryResult","original":{"line":28,"column":10},"generated":{"line":1,"column":529}},{"source":"js/components/search.js","original":{"line":28,"column":30},"generated":{"line":1,"column":537}},{"source":"js/components/search.js","name":"pageState","original":{"line":28,"column":47},"generated":{"line":1,"column":539}},{"source":"js/components/search.js","name":"pageState","original":{"line":28,"column":47},"generated":{"line":1,"column":541}},{"source":"js/components/search.js","name":"pageState","original":{"line":28,"column":47},"generated":{"line":1,"column":559}},{"source":"js/components/search.js","name":"query","original":{"line":28,"column":57},"generated":{"line":1,"column":569}},{"source":"js/components/search.js","name":"page","original":{"line":28,"column":64},"generated":{"line":1,"column":575}},{"source":"js/components/search.js","name":"filmsArray","original":{"line":29,"column":10},"generated":{"line":1,"column":578}},{"source":"js/components/search.js","original":{"line":29,"column":23},"generated":{"line":1,"column":581}},{"source":"js/components/search.js","name":"queryResult","original":{"line":29,"column":51},"generated":{"line":1,"column":583}},{"source":"js/components/search.js","name":"queryResult","original":{"line":29,"column":51},"generated":{"line":1,"column":585}},{"source":"js/components/search.js","name":"queryResult","original":{"line":29,"column":51},"generated":{"line":1,"column":614}},{"source":"js/components/search.js","name":"queryResult","original":{"line":31,"column":8},"generated":{"line":1,"column":617}},{"source":"js/components/search.js","original":{"line":31,"column":38},"generated":{"line":1,"column":620}},{"source":"js/components/search.js","name":"queryResult","original":{"line":31,"column":8},"generated":{"line":1,"column":624}},{"source":"js/components/search.js","name":"total_results","original":{"line":31,"column":20},"generated":{"line":1,"column":626}},{"source":"js/components/search.js","original":{"line":36,"column":6},"generated":{"line":1,"column":640}},{"source":"js/components/search.js","name":"warning","original":{"line":32,"column":13},"generated":{"line":1,"column":647}},{"source":"js/components/search.js","name":"warning","original":{"line":32,"column":13},"generated":{"line":1,"column":649}},{"source":"js/components/search.js","name":"warning","original":{"line":32,"column":13},"generated":{"line":1,"column":656}},{"source":"js/components/search.js","original":{"line":32,"column":21},"generated":{"line":1,"column":664}},{"source":"js/components/search.js","name":"refs","original":{"line":33,"column":6},"generated":{"line":1,"column":740}},{"source":"js/components/search.js","name":"searchInputEl","original":{"line":33,"column":11},"generated":{"line":1,"column":742}},{"source":"js/components/search.js","name":"value","original":{"line":33,"column":25},"generated":{"line":1,"column":756}},{"source":"js/components/search.js","original":{"line":33,"column":33},"generated":{"line":1,"column":762}},{"source":"js/components/search.js","name":"pageState","original":{"line":34,"column":6},"generated":{"line":1,"column":765}},{"source":"js/components/search.js","name":"query","original":{"line":34,"column":16},"generated":{"line":1,"column":775}},{"source":"js/components/search.js","original":{"line":34,"column":24},"generated":{"line":1,"column":781}},{"source":"js/components/search.js","original":{"line":35,"column":6},"generated":{"line":1,"column":789}},{"source":"js/components/search.js","original":{"line":35,"column":6},"generated":{"line":1,"column":791}},{"source":"js/components/search.js","original":{"line":35,"column":6},"generated":{"line":1,"column":793}},{"source":"js/components/search.js","name":"filmsArray","original":{"line":38,"column":18},"generated":{"line":1,"column":813}},{"source":"js/components/search.js","name":"filmsArray","original":{"line":38,"column":18},"generated":{"line":1,"column":815}},{"source":"js/components/search.js","name":"filmsArray","original":{"line":38,"column":18},"generated":{"line":1,"column":817}},{"source":"js/components/search.js","name":"filmsArray","original":{"line":38,"column":18},"generated":{"line":1,"column":832}},{"source":"js/components/search.js","name":"refs","original":{"line":40,"column":4},"generated":{"line":1,"column":835}},{"source":"js/components/search.js","name":"searchInputEl","original":{"line":40,"column":9},"generated":{"line":1,"column":837}},{"source":"js/components/search.js","name":"value","original":{"line":40,"column":23},"generated":{"line":1,"column":851}},{"source":"js/components/search.js","original":{"line":40,"column":31},"generated":{"line":1,"column":857}},{"source":"js/components/search.js","original":{"line":41,"column":4},"generated":{"line":1,"column":860}},{"source":"js/components/search.js","name":"error","original":{"line":41,"column":11},"generated":{"line":1,"column":866}},{"source":"js/components/search.js","name":"failure","original":{"line":42,"column":11},"generated":{"line":1,"column":869}},{"source":"js/components/search.js","name":"failure","original":{"line":42,"column":11},"generated":{"line":1,"column":871}},{"source":"js/components/search.js","name":"failure","original":{"line":42,"column":11},"generated":{"line":1,"column":878}},{"source":"js/components/search.js","name":"error","original":{"line":42,"column":22},"generated":{"line":1,"column":889}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":895}},{"source":"js/components/search.js","name":"initSearch","original":{"line":46,"column":13},"generated":{"line":1,"column":901}},{"source":"js/components/search.js","original":{"line":46,"column":26},"generated":{"line":1,"column":903}},{"source":"js/components/search.js","original":{"line":46,"column":38},"generated":{"line":1,"column":914}},{"source":"js/components/search.js","original":{"line":46,"column":38},"generated":{"line":1,"column":918}},{"source":"js/components/search.js","original":{"line":46,"column":38},"generated":{"line":1,"column":920}},{"source":"js/components/search.js","name":"refs","original":{"line":47,"column":2},"generated":{"line":1,"column":922}},{"source":"js/components/search.js","name":"searchInputEl","original":{"line":47,"column":7},"generated":{"line":1,"column":924}},{"source":"js/components/search.js","name":"document","original":{"line":47,"column":23},"generated":{"line":1,"column":938}},{"source":"js/components/search.js","name":"querySelector","original":{"line":47,"column":32},"generated":{"line":1,"column":947}},{"source":"js/components/search.js","original":{"line":47,"column":46},"generated":{"line":1,"column":961}},{"source":"js/components/search.js","name":"refs","original":{"line":48,"column":2},"generated":{"line":1,"column":984}},{"source":"js/components/search.js","name":"searchFormEl","original":{"line":48,"column":7},"generated":{"line":1,"column":986}},{"source":"js/components/search.js","name":"document","original":{"line":48,"column":22},"generated":{"line":1,"column":999}},{"source":"js/components/search.js","name":"querySelector","original":{"line":48,"column":31},"generated":{"line":1,"column":1008}},{"source":"js/components/search.js","original":{"line":48,"column":45},"generated":{"line":1,"column":1022}},{"source":"js/components/search.js","name":"refs","original":{"line":49,"column":2},"generated":{"line":1,"column":1046}},{"source":"js/components/search.js","name":"searchButtonEl","original":{"line":49,"column":7},"generated":{"line":1,"column":1048}},{"source":"js/components/search.js","name":"document","original":{"line":49,"column":24},"generated":{"line":1,"column":1063}},{"source":"js/components/search.js","name":"querySelector","original":{"line":49,"column":33},"generated":{"line":1,"column":1072}},{"source":"js/components/search.js","original":{"line":49,"column":47},"generated":{"line":1,"column":1086}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":51,"column":23},"generated":{"line":1,"column":1104}},{"source":"js/components/search.js","name":"refs","original":{"line":51,"column":2},"generated":{"line":1,"column":1112}},{"source":"js/components/search.js","name":"refs","original":{"line":51,"column":2},"generated":{"line":1,"column":1114}},{"source":"js/components/search.js","name":"searchButtonEl","original":{"line":51,"column":7},"generated":{"line":1,"column":1116}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":51,"column":23},"generated":{"line":1,"column":1138}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":51,"column":23},"generated":{"line":1,"column":1142}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":51,"column":23},"generated":{"line":1,"column":1145}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":51,"column":23},"generated":{"line":1,"column":1147}},{"source":"js/components/search.js","original":{"line":51,"column":40},"generated":{"line":1,"column":1164}},{"source":"js/components/search.js","name":"onFormSubmit","original":{"line":51,"column":49},"generated":{"line":1,"column":1172}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":52,"column":21},"generated":{"line":1,"column":1175}},{"source":"js/components/search.js","name":"refs","original":{"line":52,"column":2},"generated":{"line":1,"column":1183}},{"source":"js/components/search.js","name":"refs","original":{"line":52,"column":2},"generated":{"line":1,"column":1185}},{"source":"js/components/search.js","name":"searchFormEl","original":{"line":52,"column":7},"generated":{"line":1,"column":1187}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":52,"column":21},"generated":{"line":1,"column":1207}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":52,"column":21},"generated":{"line":1,"column":1211}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":52,"column":21},"generated":{"line":1,"column":1214}},{"source":"js/components/search.js","name":"addEventListener","original":{"line":52,"column":21},"generated":{"line":1,"column":1216}},{"source":"js/components/search.js","original":{"line":52,"column":38},"generated":{"line":1,"column":1233}},{"source":"js/components/search.js","name":"onFormSubmit","original":{"line":52,"column":48},"generated":{"line":1,"column":1242}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":1246}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":1254}},{"source":"js/components/search.js","original":{"line":46,"column":7},"generated":{"line":1,"column":1265}}],"sources":{"js/components/search.js":"import { getMoviesByQuery } from '../api/moviesdb-api';\nimport { makeMoviesArrayForRendering, renderGallery } from './rendering-movies';\nimport { Notify } from 'notiflix';\nimport { renderTopMovies } from './rendering-top-movies';\n\nconst refs = {\n  searchInputEl: null,\n  searchFormEl: null,\n  searchButtonEl: null,\n};\n\nconst onFormSubmit = function (event) {\n  event.preventDefault();\n  const query = refs.searchInputEl.value;\n\n  if (query.trim() === '') {\n    Notify.warning('Please enter movie name and try again');\n    return;\n  }\n\n  pageState.query = query;\n  pagination.reset();\n  RenderSearchResults();\n};\n\nexport async function RenderSearchResults(page = 1) {\n  try {\n    const queryResult = await getMoviesByQuery(pageState.query, page);\n    const filmsArray = makeMoviesArrayForRendering(queryResult);\n\n    if (queryResult.total_results === 0) {\n      Notify.warning('Search result not successful. Enter the correct movie name and try again');\n      refs.searchInputEl.value = '';\n      pageState.query = '';\n      renderTopMovies();\n      return;\n    }\n    renderGallery(filmsArray);\n\n    refs.searchInputEl.value = '';\n  } catch (error) {\n    Notify.failure(`${error}`);\n  }\n}\n\nexport const initSearch = function () {\n  refs.searchInputEl = document.querySelector('input[name=\"query\"]');\n  refs.searchFormEl = document.querySelector('.header__search-form');\n  refs.searchButtonEl = document.querySelector('.button-search');\n\n  refs.searchButtonEl?.addEventListener('click', onFormSubmit);\n  refs.searchFormEl?.addEventListener('submit', onFormSubmit);\n};\n"},"lineCount":null}},"error":null,"hash":"dd3dc71743cbbd7895d9337af8beb6e6","cacheData":{"env":{}}}